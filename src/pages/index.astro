---
import '@/styles/global.css';

import Container from '@/components/container.astro';
import { Button } from '@/components/ui/button';
import { getCollection } from 'astro:content';

const courses = await getCollection('course');
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro + TailwindCSS</title>
	</head>

	<body>
		<Container>
			<div class="py-8">
				<h1 class="text-4xl font-bold text-gray-900 mb-8">Welcome to Our Courses</h1>

				<div class="mb-8">
					<Button>Tailwind Button in Astro!</Button>
					<a href="/markdown-page" class="p-4 underline">Markdown is also supported...</a>
					<a href="/course" class="p-4 underline">View All Courses</a>
				</div>

				{courses.length > 0 ? (
					<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
						{courses.map((course) => (
							<div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300">
								{course.data.thumbnail && (
									<img
										src={course.data.thumbnail}
										alt={course.data.title}
										class="w-full h-48 object-cover"
									/>
								)}
								<div class="p-6">
									<h2 class="text-xl font-semibold text-gray-900 mb-2">
										<a href={`/course/${course.data.slug}`} class="hover:text-blue-600 transition-colors">
											{course.data.title}
										</a>
									</h2>
									<p class="text-gray-600 text-sm mb-4">
										Slug: {course.data.slug}
									</p>
									<a
										href={`/course/${course.data.slug}`}
										class="inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors"
									>
										View Course
									</a>
								</div>
							</div>
						))}
					</div>
				) : (
					<div class="text-center py-12">
						<p class="text-gray-500 text-lg">No courses available yet.</p>
						<p class="text-gray-400 text-sm mt-2">
							<a href="/admin" class="underline">Add courses via Decap CMS</a>
						</p>
					</div>
				)}
			</div>
		</Container>
	</body>
</html>
